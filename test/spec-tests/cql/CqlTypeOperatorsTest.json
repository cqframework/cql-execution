{
   "library" : {
      "annotation" : [ {
         "translatorOptions" : "",
         "type" : "CqlToElmInfo"
      } ],
      "identifier" : {
         "id" : "CqlTypeOperatorsTest",
         "version" : "1.4.0"
      },
      "schemaIdentifier" : {
         "id" : "urn:hl7-org:elm",
         "version" : "r1"
      },
      "usings" : {
         "def" : [ {
            "localIdentifier" : "System",
            "uri" : "urn:hl7-org:elm-types:r1"
         }, {
            "localIdentifier" : "Simple",
            "uri" : "https://github.com/cqframework/cql-execution/simple"
         } ]
      },
      "statements" : {
         "def" : [ {
            "name" : "Patient",
            "context" : "Patient",
            "expression" : {
               "type" : "SingletonFrom",
               "operand" : {
                  "dataType" : "{https://github.com/cqframework/cql-execution/simple}Patient",
                  "type" : "Retrieve"
               }
            }
         }, {
            "name" : "As",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "AsQuantity",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "strict" : false,
                           "type" : "As",
                           "operand" : {
                              "value" : 45.5,
                              "unit" : "g",
                              "type" : "Quantity"
                           },
                           "asTypeSpecifier" : {
                              "name" : "{urn:hl7-org:elm-types:r1}Quantity",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "value" : 45.5,
                           "unit" : "g",
                           "type" : "Quantity"
                        }
                     } ]
                  }
               }, {
                  "name" : "CastAsQuantity",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "strict" : true,
                           "type" : "As",
                           "operand" : {
                              "value" : 45.5,
                              "unit" : "g",
                              "type" : "Quantity"
                           },
                           "asTypeSpecifier" : {
                              "name" : "{urn:hl7-org:elm-types:r1}Quantity",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "value" : 45.5,
                           "unit" : "g",
                           "type" : "Quantity"
                        }
                     } ]
                  }
               }, {
                  "name" : "AsDateTime",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "strict" : false,
                           "type" : "As",
                           "operand" : {
                              "type" : "DateTime",
                              "year" : {
                                 "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                                 "value" : "2014",
                                 "type" : "Literal"
                              },
                              "month" : {
                                 "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                                 "value" : "01",
                                 "type" : "Literal"
                              },
                              "day" : {
                                 "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                                 "value" : "01",
                                 "type" : "Literal"
                              }
                           },
                           "asTypeSpecifier" : {
                              "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "type" : "DateTime",
                           "year" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "2014",
                              "type" : "Literal"
                           },
                           "month" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "1",
                              "type" : "Literal"
                           },
                           "day" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "1",
                              "type" : "Literal"
                           }
                        }
                     } ]
                  }
               } ]
            }
         }, {
            "name" : "Convert",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "IntegerToDecimal",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToDecimal",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "5",
                              "type" : "Literal"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "value" : "5.0",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "IntegerToString",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToString",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "5",
                              "type" : "Literal"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "5",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "StringToIntegerError",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToInteger",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "foo",
                              "type" : "Literal"
                           }
                        }
                     }, {
                        "name" : "invalid",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "value" : "true",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "StringToDateTime",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "skipped",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "Answer does not include timezone offset, but default offset depends on test environment",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "StringToTime",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "skipped",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "Wrong answer (null vs @T14:30:00.000)",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "StringToDateTimeMalformed",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToDateTime",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "2014/01/01",
                              "type" : "Literal"
                           }
                        }
                     }, {
                        "name" : "invalid",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "value" : "true",
                           "type" : "Literal"
                        }
                     } ]
                  }
               } ]
            }
         }, {
            "name" : "Is",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "IntegerIsInteger",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "Is",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "5",
                              "type" : "Literal"
                           },
                           "isTypeSpecifier" : {
                              "name" : "{urn:hl7-org:elm-types:r1}Integer",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "value" : "true",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "StringIsInteger",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "Is",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "5",
                              "type" : "Literal"
                           },
                           "isTypeSpecifier" : {
                              "name" : "{urn:hl7-org:elm-types:r1}Integer",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "value" : "false",
                           "type" : "Literal"
                        }
                     } ]
                  }
               } ]
            }
         }, {
            "name" : "ToBoolean",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "StringNoToBoolean",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToBoolean",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "NO",
                              "type" : "Literal"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "value" : "false",
                           "type" : "Literal"
                        }
                     } ]
                  }
               } ]
            }
         }, {
            "name" : "ToConcept",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "CodeToConcept1",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToConcept",
                           "operand" : {
                              "classType" : "{urn:hl7-org:elm-types:r1}Code",
                              "type" : "Instance",
                              "element" : [ {
                                 "name" : "code",
                                 "value" : {
                                    "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                    "value" : "8480-6",
                                    "type" : "Literal"
                                 }
                              } ]
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "classType" : "{urn:hl7-org:elm-types:r1}Concept",
                           "type" : "Instance",
                           "element" : [ {
                              "name" : "codes",
                              "value" : {
                                 "type" : "ToList",
                                 "operand" : {
                                    "classType" : "{urn:hl7-org:elm-types:r1}Code",
                                    "type" : "Instance",
                                    "element" : [ {
                                       "name" : "code",
                                       "value" : {
                                          "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                          "value" : "8480-6",
                                          "type" : "Literal"
                                       }
                                    } ]
                                 }
                              }
                           } ]
                        }
                     } ]
                  }
               } ]
            }
         }, {
            "name" : "ToDateTime",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "ToDateTime1",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "skipped",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "Answer does not include timezone offset, but default offset depends on test environment",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "ToDateTime2",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "skipped",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "Answer does not include timezone offset, but default offset depends on test environment",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "ToDateTime3",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "skipped",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "Answer does not include timezone offset, but default offset depends on test environment",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "ToDateTime4",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "skipped",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "@2014-01-01T12:05:05.955+01:30 Parsed with offset 1 (should be 1.5)",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "ToDateTime5",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "skipped",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "@2014-01-01T12:05:05.955-01:15 Parsed with offset -1 (should be -1.25)",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "ToDateTime6",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToDateTime",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "2014-01-01T12:05:05.955Z",
                              "type" : "Literal"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "type" : "DateTime",
                           "year" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "2014",
                              "type" : "Literal"
                           },
                           "month" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "1",
                              "type" : "Literal"
                           },
                           "day" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "1",
                              "type" : "Literal"
                           },
                           "hour" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "12",
                              "type" : "Literal"
                           },
                           "minute" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "5",
                              "type" : "Literal"
                           },
                           "second" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "5",
                              "type" : "Literal"
                           },
                           "millisecond" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "955",
                              "type" : "Literal"
                           },
                           "timezoneOffset" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "0.0",
                              "type" : "Literal"
                           }
                        }
                     } ]
                  }
               }, {
                  "name" : "ToDateTimeMalformed",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToDateTime",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "2014/01/01T12:05:05.955Z",
                              "type" : "Literal"
                           }
                        }
                     }, {
                        "name" : "invalid",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "value" : "true",
                           "type" : "Literal"
                        }
                     } ]
                  }
               } ]
            }
         }, {
            "name" : "ToDecimal",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "String25D5ToDecimal",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToDecimal",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "+25.5",
                              "type" : "Literal"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "value" : "25.5",
                           "type" : "Literal"
                        }
                     } ]
                  }
               } ]
            }
         }, {
            "name" : "ToInteger",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "StringNeg25ToInteger",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToInteger",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "-25",
                              "type" : "Literal"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "type" : "Negate",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "25",
                              "type" : "Literal"
                           }
                        }
                     } ]
                  }
               } ]
            }
         }, {
            "name" : "ToQuantity",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "String5D5CMToQuantity",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToQuantity",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "5.5 'cm'",
                              "type" : "Literal"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "value" : 5.5,
                           "unit" : "cm",
                           "type" : "Quantity"
                        }
                     } ]
                  }
               } ]
            }
         }, {
            "name" : "ToString",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "IntegerNeg5ToString",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToString",
                           "operand" : {
                              "type" : "Negate",
                              "operand" : {
                                 "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                                 "value" : "5",
                                 "type" : "Literal"
                              }
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "-5",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "Decimal18D55ToString",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToString",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "18.55",
                              "type" : "Literal"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "18.55",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "Quantity5D5CMToString",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToString",
                           "operand" : {
                              "value" : 5.5,
                              "unit" : "cm",
                              "type" : "Quantity"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "5.5 'cm'",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "BooleanTrueToString",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToString",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                              "value" : "true",
                              "type" : "Literal"
                           }
                        }
                     }, {
                        "name" : "output",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "true",
                           "type" : "Literal"
                        }
                     } ]
                  }
               } ]
            }
         }, {
            "name" : "ToTime",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "ToTime1",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "skipped",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "Wrong answer (null vs @T14:30:00.000)",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "ToTime2",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "skipped",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "Wrong answer (null vs @T14:30:00.000)",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "ToTime3",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "skipped",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "Wrong answer (null vs @T14:30:00.000)",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "ToTime4",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "skipped",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "Wrong answer (null vs @T14:30:00.000)",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "name" : "ToTimeMalformed",
                  "value" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "expression",
                        "value" : {
                           "type" : "ToTime",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "T14-30-00.0",
                              "type" : "Literal"
                           }
                        }
                     }, {
                        "name" : "invalid",
                        "value" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "value" : "true",
                           "type" : "Literal"
                        }
                     } ]
                  }
               } ]
            }
         } ]
      }
   }
}

